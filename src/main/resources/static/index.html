<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>index</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>
<body>
<div id="table_id">
    <table id="product_id">
        <thead>
        <tr>
            <th>id</th>
            <th>description</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <br>

    <a id="current_page"></a>
    <input type="submit" id="previous_page" value="previous">
    <input type="submit" id="next_page" value="next">
</div>

<p></p>
<p></p>

<script>
    let current_page = 0;
    let page_size = 2;
    let sort_field = "id";
    let last_page = false;
    function turn_next() {
        current_page++;
        $('#table_id tbody').empty();
        $("#current_page").replaceWith("<a id='current_page'> " + current_page + " </a>");
        $.ajax({
            url: "http://localhost:8080/v1/products?page=" + (current_page - 1) + "&pageSize= " +
                page_size + "&sortField=" + sort_field,
            method: "get",
            dataType: "json",
            success: function (data){
                for (let i = 0; i < data.content.length; i++) {
                    const product_id = data.content[i].id;
                    const description = data.content[i].description;
                    const last_td = '<tr><td>' + product_id + '</td><td>' + description + '</td></tr>';
                    $('#table_id tbody').append(last_td);
                }
                last_page = data.last;
            }
        });
    }

    turn_next();

    function turn_previous() {
        $('#table_id tbody').empty();
        current_page--;
        $("#current_page").replaceWith("<a id='current_page'> " + (current_page) + " </a>");
        $.ajax({
            url: "http://localhost:8080/v1/products?page=" + (current_page - 1) + "&pageSize= " +
                page_size + "&sortField=" + sort_field,
            method: "get",
            dataType: "json",
            success: function (data){
                for (let i = 0; i < data.content.length; i++) {
                    const product_id = data.content[i].id;
                    const description = data.content[i].description;
                    const last_td = '<tr><td>' + product_id + '</td><td>' + description + '</td></tr>';
                    $('#table_id tbody').append(last_td);
                }
                last_page = data.last;
            }
        });
    }

    $(document).ready(function (){
        $("#next_page").click(function () {
            if (last_page !== true) {
                turn_next();
            }
        })
    })

    $(document).ready(function (){
        $("#previous_page").click(function () {
            if (current_page - 2 >= 0) {
                turn_previous();
            }
        })
    })
</script>
</body>
<!--<body>-->
<!--<div id="index_page">-->
<!--    <p>Text</p>-->
<!--    <form>-->
<!--        <input type="submit" id="personal_room" value="go to personal room">-->
<!--    </form>-->
<!--</div>-->

<!--<script>-->
<!--    $(document).ready(function(){-->
<!--        $("#personal_room").click(function(){-->
<!--            $("#index_page").replaceWith-->
<!--            (`<div id="home-page">    <div id="table_orders"></div>    <div id="orders_form">-->
<!--        <form action="/v1/orders" method="get">-->
<!--             <input type="text" name="userId" placeholder="enter user id">-->
<!--                    <input type="text" name="page" placeholder="enter page number">-->
<!--                    <input type="text" name="pageSize" placeholder="enter page size">-->
<!--                    <input type="text" name="sortField" placeholder="enter sort field">-->
<!--                    <input type="submit" id="get_orders" value="get orders">-->
<!--        </form><br>-->
<!--        <br>-->
<!--        <form action="/v1/products" method="get">-->
<!--            <input type="text" name="page" placeholder="enter page number">-->
<!--            <input type="text" name="pageSize" placeholder="enter page size">-->
<!--            <input type="text" name="sortField" placeholder="enter a sort option">-->
<!--            <input type="submit" id="get_products" value="get products">-->
<!--        </form>-->
<!--    </div>-->
<!--</div>`);-->
<!--        });-->
<!--    });-->

<!--    $(document).ready(function() {-->
<!--        $("#get_orders").click(function ( event ) {-->
<!--            event.preventDefault();-->
<!--            document.getElementById("#orders").replaceWith(-->
<!--                "    <div id=\"table_orders\">\n" +-->
<!--                "        <tr>\n" +-->
<!--                "            <th rowspan=\"2\">id</th>\n" +-->
<!--                "            <th rowspan=\"2\">status</th>\n" +-->
<!--                "            <th rowspan=\"2\">createDate</th>\n" +-->
<!--                "            <th rowspan=\"2\">address</th>\n" +-->
<!--                "            <th colspan=\"3\">orderProduct</th>\n" +-->
<!--                "        </tr>\n" +-->
<!--                "        <tr>\n" +-->
<!--                "            <th>product_id</th>\n" +-->
<!--                "            <th>description</th>\n" +-->
<!--                "            <th>amount</th>\n" +-->
<!--                "        </tr>\n" +-->
<!--                "    </div>\n");-->
<!--        });-->
<!--    });-->


<!--</script>-->

<!--</body>-->
</html>